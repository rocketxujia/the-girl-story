<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <style type="text/css">
        .box {
            margin: 5px;
            padding: 5px;
            background: #D8D5D2;
            font-size: 12px;
            line-height: 1.4em;
            float: left;
            -webkit-border-radius: 5px;
        }
        .col1{ width:100px; }
        .col2{ width:220px; }
        .col3{ width: 340px; }

        /**** Transitions ****/

        .transitions-enabled.masonry,
        .transitions-enabled.masonry .masonry-brick {
            -webkit-transition-duration: 0.7s;
            -moz-transition-duration: 0.7s;
            -o-transition-duration: 0.7s;
            transition-duration: 0.7s;
        }

        .transitions-enabled.masonry {
            -webkit-transition-property: height, width;
            -moz-transition-property: height, width;
            -o-transition-property: height, width;
            transition-property: height, width;
        }

        .transitions-enabled.masonry  .masonry-brick {
            -webkit-transition-property: left, right, top;
            -moz-transition-property: left, right, top;
            -o-transition-property: left, right, top;
            transition-property: left, right, top;
        }


            /* disable transitions on container */
        .transitions-enabled.infinite-scroll.masonry {
            -webkit-transition-property: none;
            -moz-transition-property: none;
            -o-transition-property: none;
            transition-property: none;
        }
    </style>
</head>
<body>
<p>
    <button id="prepend">Prepend new items</button>
    <button id="append">Append new items</button>
</p>

<div id="container" class="transitions-enabled clearfix">

    <div class="box col2">
        <p>Sit amet mi ullamcorper vehicula</p>
    </div>

    <div class="box col1">
        <p>Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.</p>
    </div>

    <div class="box col2">
        <p>Ut condimentum mi vel tellus. Suspendisse laoreet. Fusce ut est sed dolor gravida convallis. Morbi vitae ante. Vivamus ultrices luctus nunc. Suspendisse et dolor. Etiam dignissim. Proin malesuada adipiscing lacus. Donec metus. Curabitur gravida.</p>
        <p>Phasellus pede arcu, dapibus eu, fermentum et, dapibus sed, urna.</p>
    </div>

    <div class="box col2">
        <p>Vestibulum volutpat, lacus a ultrices sagittis,</p>
        <p>Fusce accumsan mollis eros. Pellentesque a diam sit amet mi ullamcorper vehicula  </p>
    </div>

    <div class="box col2">
        <p>Sit amet mi ullamcorper vehicula</p>
    </div>

    <div class="box col1">
        <p>Morbi purus libero</p>
    </div>

    <div class="box col1">
        <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros. Nullam malesuada erat ut turpis. Suspendisse urna nibh, viverra non, semper suscipit, posuere a, pede.</p>
    </div>

    <div class="box col3">
        <p>Donec nec justo eget felis facilisis fermentum. Aliquam porttitor mauris sit amet orci. Aenean dignissim pellentesque felis.</p>
        <p>Vestibulum volutpat, lacus a ultrices sagittis,</p>
        <ul>
            <li>Lacus a ultrices sagittis</li>
            <li>Democratis</li>
        </ul>
    </div>


</div> <!-- #container -->

<script src="../js/jquery-1.7.1.min.js"></script>
<script src="../jquery.masonry.min.js"></script>
<script src="../js/modernizr-transitions.js"></script>
<script src="../js/box-maker.js"></script>
<script>
    $(function(){

        var $container = $('#container');

        $container.masonry({
            itemSelector: '.box',
            columnWidth: 120 ,
            isAnimated: !Modernizr.csstransitions
        });

        $('#prepend').click(function(){
            var $boxes = $( boxMaker.makeBoxes() );
            $container.prepend( $boxes ).masonry( 'reload' );
        });

        $('#append').click(function(){
            var $boxes = $( boxMaker.makeBoxes() );
            $container.append( $boxes ).masonry( 'appended', $boxes );
        });

    });
</script>

</body>
</html>